---
title: "ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº"
description: "çŒ®ç«‹ã‚’Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚„Appleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è‡ªå‹•è¿½åŠ "
---

## æ¦‚è¦

ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æºã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç”Ÿæˆã•ã‚ŒãŸçŒ®ç«‹ã‚’è‡ªå‹•çš„ã«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ ã§ãã¾ã™ã€‚å®¶æ—å…¨å“¡ãŒçŒ®ç«‹ã‚’ç¢ºèªã§ãã€è²·ã„ç‰©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚‚æŠŠæ¡ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

<img src="/images/calendar-integration.png" alt="ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æºã®ä¾‹" />

## å¯¾å¿œã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼

- Google Calendar
- Apple Calendar (iCloud)
- Microsoft Outlook
- ãã®ä»–ã®iCalendarå¯¾å¿œã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼

## Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº

<Steps>
  <Step title="Google Cloud Projectã‚’ä½œæˆ">
    [Google Cloud Console](https://console.cloud.google.com/)ã§æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
  </Step>
  
  <Step title="Calendar APIã‚’æœ‰åŠ¹åŒ–">
    1. APIã¨ã‚µãƒ¼ãƒ“ã‚¹ > ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ã‚’é–‹ã
    2. "Google Calendar API" ã‚’æ¤œç´¢
    3. "æœ‰åŠ¹ã«ã™ã‚‹" ã‚’ã‚¯ãƒªãƒƒã‚¯
  </Step>
  
  <Step title="OAuthèªè¨¼æƒ…å ±ã‚’ä½œæˆ">
    1. APIã¨ã‚µãƒ¼ãƒ“ã‚¹ > èªè¨¼æƒ…å ± ã‚’é–‹ã
    2. "èªè¨¼æƒ…å ±ã‚’ä½œæˆ" > "OAuthã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID" ã‚’é¸æŠ
    3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¨®é¡ã‚’é¸æŠ
    4. ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã‚’è¨­å®š
  </Step>
  
  <Step title="MealPlan AIã¨é€£æº">
    å–å¾—ã—ãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’MealPlan AIã«ç™»éŒ²ã—ã¾ã™ã€‚
    
    ```bash
    curl -X POST https://api.mealplan-ai.com/v1/integrations/calendar \
      -H "Authorization: Bearer YOUR_API_KEY" \
      -H "Content-Type: application/json" \
      -d '{
        "provider": "google",
        "client_id": "your-client-id",
        "client_secret": "your-client-secret",
        "calendar_id": "primary"
      }'
    ```
  </Step>
</Steps>

## ä½¿ç”¨æ–¹æ³•

### çŒ®ç«‹ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ 

çŒ®ç«‹ç”Ÿæˆæ™‚ã«è‡ªå‹•çš„ã«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ ã™ã‚‹ã‚ˆã†è¨­å®šã§ãã¾ã™ã€‚

```javascript
const response = await fetch('https://api.mealplan-ai.com/v1/meal-plans', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    duration_days: 7,
    family_profile_id: 'fp_abc123',
    integrations: {
      calendar: {
        enabled: true,
        provider: 'google',
        calendar_id: 'primary',
        event_settings: {
          breakfast_time: '07:00',
          lunch_time: '12:00',
          dinner_time: '18:00',
          reminders: [
            { method: 'popup', minutes: 60 }
          ]
        }
      }
    }
  })
});
```

### ä½œæˆã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ

å„é£Ÿäº‹ã”ã¨ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¤ãƒ™ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ï¼š

```
ã‚¿ã‚¤ãƒˆãƒ«: ğŸŒ… æœé£Ÿ: å’Œé¢¨ãƒˆãƒ¼ã‚¹ãƒˆã€ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ
æ™‚é–“: 2024å¹´1æœˆ15æ—¥ 7:00 - 7:30
èª¬æ˜:
  çŒ®ç«‹: å’Œé¢¨ãƒˆãƒ¼ã‚¹ãƒˆã€ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ
  ã‚«ãƒ­ãƒªãƒ¼: 350kcal
  èª¿ç†æ™‚é–“: 10åˆ†
  
  ãƒ¬ã‚·ãƒ”: https://app.mealplan-ai.com/recipes/rec_abc123
  è²·ã„ç‰©ãƒªã‚¹ãƒˆ: https://app.mealplan-ai.com/shopping/sl_xyz789
```

## å®Ÿè£…ä¾‹

### Node.js + Google Calendar API

```javascript
const { google } = require('googleapis');

// OAuth2ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆæœŸåŒ–
const oauth2Client = new google.auth.OAuth2(
  process.env.GOOGLE_CLIENT_ID,
  process.env.GOOGLE_CLIENT_SECRET,
  process.env.REDIRECT_URI
);

// ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š
oauth2Client.setCredentials({
  access_token: process.env.ACCESS_TOKEN,
  refresh_token: process.env.REFRESH_TOKEN
});

const calendar = google.calendar({ version: 'v3', auth: oauth2Client });

// çŒ®ç«‹ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ 
async function addMealToCalendar(meal, date, mealType) {
  const timeMap = {
    breakfast: { start: '07:00', end: '07:30' },
    lunch: { start: '12:00', end: '12:30' },
    dinner: { start: '18:00', end: '19:00' }
  };
  
  const times = timeMap[mealType];
  const startDateTime = `${date}T${times.start}:00`;
  const endDateTime = `${date}T${times.end}:00`;
  
  const event = {
    summary: `${getMealEmoji(mealType)} ${getMealLabel(mealType)}: ${meal.name}`,
    description: `
çŒ®ç«‹: ${meal.name}
ã‚«ãƒ­ãƒªãƒ¼: ${meal.calories}kcal
èª¿ç†æ™‚é–“: ${meal.cooking_time}åˆ†

ãƒ¬ã‚·ãƒ”: ${meal.recipe_url}
è²·ã„ç‰©ãƒªã‚¹ãƒˆ: ${meal.shopping_list_url}
    `.trim(),
    start: {
      dateTime: startDateTime,
      timeZone: 'Asia/Tokyo'
    },
    end: {
      dateTime: endDateTime,
      timeZone: 'Asia/Tokyo'
    },
    reminders: {
      useDefault: false,
      overrides: [
        { method: 'popup', minutes: 60 }
      ]
    },
    colorId: getMealColor(mealType)
  };
  
  const response = await calendar.events.insert({
    calendarId: 'primary',
    resource: event
  });
  
  return response.data;
}

function getMealEmoji(mealType) {
  const emojis = {
    breakfast: 'ğŸŒ…',
    lunch: 'ğŸŒ',
    dinner: 'ğŸŒ™'
  };
  return emojis[mealType] || 'ğŸ½ï¸';
}

function getMealLabel(mealType) {
  const labels = {
    breakfast: 'æœé£Ÿ',
    lunch: 'æ˜¼é£Ÿ',
    dinner: 'å¤•é£Ÿ'
  };
  return labels[mealType];
}

function getMealColor(mealType) {
  // Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰
  const colors = {
    breakfast: '5', // é»„è‰²
    lunch: '9',     // é’
    dinner: '11'    // èµ¤
  };
  return colors[mealType];
}

// 1é€±é–“åˆ†ã®çŒ®ç«‹ã‚’è¿½åŠ 
async function addWeeklyMealPlan(mealPlan) {
  const promises = [];
  
  for (const day of mealPlan.days) {
    for (const [mealType, meal] of Object.entries(day.meals)) {
      promises.push(addMealToCalendar(meal, day.date, mealType));
    }
  }
  
  await Promise.all(promises);
  console.log('çŒ®ç«‹ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ ã—ã¾ã—ãŸ');
}
```

### Python + Google Calendar API

```python
from google.oauth2.credentials import Credentials
from googleapiclient.discovery import build
from datetime import datetime, timedelta

def add_meal_to_calendar(meal, date, meal_type):
    """çŒ®ç«‹ã‚’Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ """
    
    creds = Credentials.from_authorized_user_file('token.json')
    service = build('calendar', 'v3', credentials=creds)
    
    time_map = {
        'breakfast': {'start': '07:00', 'end': '07:30'},
        'lunch': {'start': '12:00', 'end': '12:30'},
        'dinner': {'start': '18:00', 'end': '19:00'}
    }
    
    times = time_map[meal_type]
    start_datetime = f"{date}T{times['start']}:00"
    end_datetime = f"{date}T{times['end']}:00"
    
    event = {
        'summary': f"{get_meal_emoji(meal_type)} {get_meal_label(meal_type)}: {meal['name']}",
        'description': f"""
çŒ®ç«‹: {meal['name']}
ã‚«ãƒ­ãƒªãƒ¼: {meal['calories']}kcal
èª¿ç†æ™‚é–“: {meal['cooking_time']}åˆ†

ãƒ¬ã‚·ãƒ”: {meal['recipe_url']}
è²·ã„ç‰©ãƒªã‚¹ãƒˆ: {meal['shopping_list_url']}
        """.strip(),
        'start': {
            'dateTime': start_datetime,
            'timeZone': 'Asia/Tokyo'
        },
        'end': {
            'dateTime': end_datetime,
            'timeZone': 'Asia/Tokyo'
        },
        'reminders': {
            'useDefault': False,
            'overrides': [
                {'method': 'popup', 'minutes': 60}
            ]
        },
        'colorId': get_meal_color(meal_type)
    }
    
    event = service.events().insert(
        calendarId='primary',
        body=event
    ).execute()
    
    return event

def get_meal_emoji(meal_type):
    emojis = {
        'breakfast': 'ğŸŒ…',
        'lunch': 'ğŸŒ',
        'dinner': 'ğŸŒ™'
    }
    return emojis.get(meal_type, 'ğŸ½ï¸')

def get_meal_label(meal_type):
    labels = {
        'breakfast': 'æœé£Ÿ',
        'lunch': 'æ˜¼é£Ÿ',
        'dinner': 'å¤•é£Ÿ'
    }
    return labels[meal_type]

def get_meal_color(meal_type):
    colors = {
        'breakfast': '5',  # é»„è‰²
        'lunch': '9',      # é’
        'dinner': '11'     # èµ¤
    }
    return colors[meal_type]
```

## iCalendarå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

ä»»æ„ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¢ãƒ—ãƒªã§ä½¿ç”¨ã§ãã‚‹iCalendarå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ãã¾ã™ã€‚

```javascript
async function exportToICalendar(mealPlanId) {
  const response = await fetch(
    `https://api.mealplan-ai.com/v1/meal-plans/${mealPlanId}/export/ical`,
    {
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    }
  );
  
  const icalData = await response.text();
  
  // ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜
  const blob = new Blob([icalData], { type: 'text/calendar' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'meal-plan.ics';
  a.click();
}
```

ç”Ÿæˆã•ã‚Œã‚‹iCalendarãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹ï¼š

```ics
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//MealPlan AI//JP
CALSCALE:GREGORIAN
METHOD:PUBLISH

BEGIN:VEVENT
UID:meal_abc123@mealplan-ai.com
DTSTAMP:20240115T000000Z
DTSTART:20240115T070000
DTEND:20240115T073000
SUMMARY:ğŸŒ… æœé£Ÿ: å’Œé¢¨ãƒˆãƒ¼ã‚¹ãƒˆã€ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ
DESCRIPTION:çŒ®ç«‹: å’Œé¢¨ãƒˆãƒ¼ã‚¹ãƒˆã€ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ\nã‚«ãƒ­ãƒªãƒ¼: 350kcal\nèª¿ç†æ™‚é–“: 10åˆ†
LOCATION:è‡ªå®…
BEGIN:VALARM
TRIGGER:-PT60M
ACTION:DISPLAY
DESCRIPTION:çŒ®ç«‹ã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼
END:VALARM
END:VEVENT

END:VCALENDAR
```

## é«˜åº¦ãªæ©Ÿèƒ½

### è²·ã„ç‰©æ—¥ã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

è²·ã„ç‰©ã«è¡Œãæ—¥ã‚’è‡ªå‹•çš„ã«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¿½åŠ ã—ã¾ã™ã€‚

```javascript
async function addShoppingReminder(shoppingListId, date) {
  const event = {
    summary: 'ğŸ›’ è²·ã„ç‰©',
    description: 'ä»Šé€±ã®é£Ÿæã‚’è³¼å…¥\n\nè²·ã„ç‰©ãƒªã‚¹ãƒˆ: https://app.mealplan-ai.com/shopping/' + shoppingListId,
    start: {
      dateTime: `${date}T09:00:00`,
      timeZone: 'Asia/Tokyo'
    },
    end: {
      dateTime: `${date}T10:00:00`,
      timeZone: 'Asia/Tokyo'
    },
    reminders: {
      useDefault: false,
      overrides: [
        { method: 'popup', minutes: 1440 }, // å‰æ—¥
        { method: 'popup', minutes: 60 }    // 1æ™‚é–“å‰
      ]
    }
  };
  
  await calendar.events.insert({
    calendarId: 'primary',
    resource: event
  });
}
```

### èª¿ç†æ™‚é–“ã®è€ƒæ…®

èª¿ç†æ™‚é–“ã«å¿œã˜ã¦ã‚¤ãƒ™ãƒ³ãƒˆã®é•·ã•ã‚’èª¿æ•´ã—ã¾ã™ã€‚

```javascript
function calculateEventDuration(meal) {
  const baseTime = 30; // åŸºæœ¬30åˆ†
  const cookingTime = meal.cooking_time || 0;
  return Math.max(baseTime, cookingTime + 10); // èª¿ç†æ™‚é–“ + æº–å‚™10åˆ†
}
```

### å®¶æ—ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®å…±æœ‰

å®¶æ—å…¨å“¡ãŒè¦‹ã‚‰ã‚Œã‚‹å…±æœ‰ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

```javascript
async function createFamilyCalendar() {
  const calendar = {
    summary: 'å®¶æ—ã®çŒ®ç«‹',
    description: 'MealPlan AIã§ç”Ÿæˆã•ã‚ŒãŸçŒ®ç«‹',
    timeZone: 'Asia/Tokyo'
  };
  
  const response = await calendarService.calendars.insert({
    resource: calendar
  });
  
  // å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼ã«å…±æœ‰
  await calendarService.acl.insert({
    calendarId: response.data.id,
    resource: {
      role: 'reader',
      scope: {
        type: 'user',
        value: 'family-member@example.com'
      }
    }
  });
  
  return response.data.id;
}
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. é©åˆ‡ãªæ™‚é–“è¨­å®š

å®¶æ—ã®ç”Ÿæ´»ãƒªã‚ºãƒ ã«åˆã‚ã›ã¦é£Ÿäº‹æ™‚é–“ã‚’è¨­å®šã—ã¾ã™ã€‚

```javascript
const mealTimes = {
  breakfast: '07:00', // æœ7æ™‚
  lunch: '12:00',     // æ˜¼12æ™‚
  dinner: '18:00'     // å¤•æ–¹6æ™‚
};
```

### 2. ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®æ´»ç”¨

èª¿ç†é–‹å§‹æ™‚é–“ã«åˆã‚ã›ã¦ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚

```javascript
const reminders = [
  { method: 'popup', minutes: 60 },  // 1æ™‚é–“å‰
  { method: 'email', minutes: 120 }  // 2æ™‚é–“å‰ï¼ˆãƒ¡ãƒ¼ãƒ«ï¼‰
];
```

### 3. ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

é£Ÿäº‹ã®ç¨®é¡ã”ã¨ã«è‰²åˆ†ã‘ã—ã¦è¦–èªæ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

<AccordionGroup>
  <Accordion title="ã‚¤ãƒ™ãƒ³ãƒˆãŒä½œæˆã•ã‚Œãªã„">
    - OAuthèªè¨¼ãŒæ­£ã—ãå®Œäº†ã—ã¦ã„ã‚‹ã‹ç¢ºèª
    - Calendar APIãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
    - å¿…è¦ãªæ¨©é™ï¼ˆã‚¹ã‚³ãƒ¼ãƒ—ï¼‰ãŒä»˜ä¸ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
    - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼IDãŒæ­£ã—ã„ã‹ç¢ºèª
  </Accordion>
  
  <Accordion title="æ™‚é–“ãŒãšã‚Œã‚‹">
    - ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³è¨­å®šã‚’ç¢ºèªï¼ˆAsia/Tokyoï¼‰
    - ã‚µãƒ¼ãƒãƒ¼ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ™‚åˆ»ãŒåŒæœŸã—ã¦ã„ã‚‹ã‹ç¢ºèª
  </Accordion>
  
  <Accordion title="ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãŒå±Šã‹ãªã„">
    - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¢ãƒ—ãƒªã®é€šçŸ¥è¨­å®šã‚’ç¢ºèª
    - ãƒ‡ãƒã‚¤ã‚¹ã®é€šçŸ¥è¨±å¯ã‚’ç¢ºèª
    - ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®è¨­å®šãŒæ­£ã—ã„ã‹ç¢ºèª
  </Accordion>
</AccordionGroup>

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

<CardGroup cols={2}>
  <Card title="Webhookçµ±åˆ" icon="webhook" href="/integrations/webhooks">
    ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ã‚’å—ã‘å–ã‚‹
  </Card>
  <Card title="Slacké€£æº" icon="slack" href="/integrations/slack">
    Slackã§çŒ®ç«‹ã‚’å…±æœ‰
  </Card>
  <Card title="Google Calendar API" icon="book" href="https://developers.google.com/calendar">
    Google Calendar APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  </Card>
</CardGroup>