---
title: "献立削除"
api: "DELETE /v1/meal-plans/{id}"
description: "献立を削除します"
---

## 概要

このエンドポイントは、指定された献立を完全に削除します。削除された献立は復元できません。

## エンドポイント

```
DELETE https://api.mealplan-ai.com/v1/meal-plans/{id}
```

## 認証

<ParamField header="Authorization" type="string" required>
  Bearer トークン形式のAPIキーまたはOAuthアクセストークン
</ParamField>

## パスパラメータ

<ParamField path="id" type="string" required>
  削除する献立のID
  
  例: `mp_abc123`
</ParamField>

## リクエスト例

<CodeGroup>
```bash cURL
curl -X DELETE https://api.mealplan-ai.com/v1/meal-plans/mp_abc123 \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch(
  'https://api.mealplan-ai.com/v1/meal-plans/mp_abc123',
  {
    method: 'DELETE',
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY'
    }
  }
);

const result = await response.json();
console.log(result);
```

```python Python
import requests

meal_plan_id = "mp_abc123"
url = f"https://api.mealplan-ai.com/v1/meal-plans/{meal_plan_id}"
headers = {
    "Authorization": "Bearer YOUR_API_KEY"
}

response = requests.delete(url, headers=headers)
result = response.json()
print(result)
```

```ruby Ruby
require 'net/http'
require 'json'

meal_plan_id = 'mp_abc123'
uri = URI("https://api.mealplan-ai.com/v1/meal-plans/#{meal_plan_id}")
request = Net::HTTP::Delete.new(uri)
request['Authorization'] = 'Bearer YOUR_API_KEY'

response = Net::HTTP.start(uri.hostname, uri.port, use_ssl: true) do |http|
  http.request(request)
end

result = JSON.parse(response.body)
puts result
```
</CodeGroup>

## レスポンス

<ResponseField name="success" type="boolean">
  削除が成功したかどうか
</ResponseField>

<ResponseField name="data" type="object">
  削除された献立の情報
  
  <Expandable title="data のプロパティ">
    <ResponseField name="data.id" type="string">
      削除された献立のID
    </ResponseField>
    
    <ResponseField name="data.deleted_at" type="string">
      削除日時（ISO 8601形式）
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="meta" type="object">
  メタデータ
</ResponseField>

## レスポンス例

### 成功レスポンス

```json
{
  "success": true,
  "data": {
    "id": "mp_abc123",
    "deleted_at": "2024-01-16T15:30:00Z"
  },
  "meta": {
    "request_id": "req_abc123",
    "timestamp": "2024-01-16T15:30:00Z"
  }
}
```

## エラーレスポンス

### 404 Not Found

献立が見つからない、または既に削除されている場合：

```json
{
  "success": false,
  "error": {
    "code": "not_found",
    "message": "指定された献立が見つかりません",
    "details": {
      "meal_plan_id": "mp_abc123"
    }
  },
  "meta": {
    "request_id": "req_xyz789",
    "timestamp": "2024-01-16T15:30:00Z"
  }
}
```

### 403 Forbidden

他のユーザーの献立を削除しようとした場合：

```json
{
  "success": false,
  "error": {
    "code": "forbidden",
    "message": "この献立を削除する権限がありません"
  }
}
```

## 使用例

### 献立を削除する基本的な例

```javascript
async function deleteMealPlan(mealPlanId) {
  try {
    const response = await fetch(
      `https://api.mealplan-ai.com/v1/meal-plans/${mealPlanId}`,
      {
        method: 'DELETE',
        headers: {
          'Authorization': 'Bearer YOUR_API_KEY'
        }
      }
    );
    
    const result = await response.json();
    
    if (result.success) {
      console.log(`献立 ${mealPlanId} を削除しました`);
      return true;
    } else {
      console.error('削除に失敗:', result.error.message);
      return false;
    }
  } catch (error) {
    console.error('エラー:', error);
    return false;
  }
}

// 使用例
deleteMealPlan('mp_abc123');
```

### 確認ダイアログ付きの削除

```javascript
async function deleteMealPlanWithConfirmation(mealPlanId) {
  // まず献立の詳細を取得
  const mealPlan = await fetch(
    `https://api.mealplan-ai.com/v1/meal-plans/${mealPlanId}`,
    {
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    }
  ).then(res => res.json());
  
  // ユーザーに確認
  const confirmed = confirm(
    `献立「${mealPlan.data.start_date} 〜 ${mealPlan.data.end_date}」を削除しますか？\n` +
    'この操作は取り消せません。'
  );
  
  if (!confirmed) {
    console.log('削除をキャンセルしました');
    return false;
  }
  
  // 削除実行
  const response = await fetch(
    `https://api.mealplan-ai.com/v1/meal-plans/${mealPlanId}`,
    {
      method: 'DELETE',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    }
  );
  
  const result = await response.json();
  return result.success;
}
```

### 古い献立を一括削除

```javascript
async function deleteOldMealPlans(daysOld = 90) {
  // 古い献立を取得
  const cutoffDate = new Date();
  cutoffDate.setDate(cutoffDate.getDate() - daysOld);
  
  const response = await fetch(
    `https://api.mealplan-ai.com/v1/meal-plans?end_date=${cutoffDate.toISOString().split('T')[0]}`,
    {
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    }
  );
  
  const { data: mealPlans } = await response.json();
  
  // 各献立を削除
  const deletePromises = mealPlans.map(mealPlan =>
    fetch(`https://api.mealplan-ai.com/v1/meal-plans/${mealPlan.id}`, {
      method: 'DELETE',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY'
      }
    })
  );
  
  const results = await Promise.all(deletePromises);
  console.log(`${results.length}件の古い献立を削除しました`);
}

// 90日以上前の献立を削除
deleteOldMealPlans(90);
```

## 削除の影響

献立を削除すると、以下のデータも影響を受けます：

<AccordionGroup>
  <Accordion title="買い物リスト">
    関連する買い物リストは自動的に削除されます。
  </Accordion>
  
  <Accordion title="お気に入りレシピ">
    献立内のレシピがお気に入りに登録されている場合、お気に入りは保持されます。
  </Accordion>
  
  <Accordion title="統計データ">
    過去の栄養統計から、この献立のデータが除外されます。
  </Accordion>
  
  <Accordion title="Webhook通知">
    献立削除イベントのWebhook通知が送信されます（設定している場合）。
  </Accordion>
</AccordionGroup>

## 注意事項

<Warning>
  **削除は取り消せません**
  
  献立を削除すると、すべての関連データが完全に削除され、復元できません。削除前に必要なデータをバックアップしてください。
</Warning>

<Tip>
  **ソフトデリート**
  
  完全に削除する代わりに、献立を「アーカイブ」状態にすることを検討してください。これにより、後で必要になった場合に復元できます。
</Tip>

<Note>
  **レート制限**
  
  削除操作もレート制限の対象です。大量の献立を削除する場合は、適切な間隔を空けてください。
</Note>

## 代替案

### アーカイブ機能の実装

完全削除の代わりに、アーカイブ機能を実装することをお勧めします：

```javascript
// カスタムメタデータを使用してアーカイブ状態を管理
async function archiveMealPlan(mealPlanId) {
  const response = await fetch(
    `https://api.mealplan-ai.com/v1/meal-plans/${mealPlanId}`,
    {
      method: 'PUT',
      headers: {
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        metadata: {
          archived: true,
          archived_at: new Date().toISOString()
        }
      })
    }
  );
  
  return await response.json();
}
```

## 関連エンドポイント

<CardGroup cols={2}>
  <Card title="献立一覧取得" icon="list" href="/api-reference/meal-plans/list">
    削除前に献立を確認
  </Card>
  <Card title="献立詳細取得" icon="file" href="/api-reference/meal-plans/get">
    削除する献立の詳細を確認
  </Card>
  <Card title="献立生成" icon="wand-magic-sparkles" href="/api-reference/meal-plans/generate">
    新しい献立を生成
  </Card>
  <Card title="Webhookイベント" icon="webhook" href="/api-reference/webhooks/events">
    削除イベントの通知を設定
  </Card>
</CardGroup>